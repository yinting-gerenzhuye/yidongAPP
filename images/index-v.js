window.indexPage=function(){var e,t,n,r=.46875,i,s,o,u,a=0,f=function(){a=(a+i)%i,a++,t.animate({left:-a*s},function(){a==i&&t.css("left",0)}),c()},l=function(){a=(a+i-1)%i,t.animate({left:-a*s},function(){a==0&&t.css("left",-i*s)}),c()},c=function(){n.find("i").removeClass("current").eq(a%i).addClass("current")},h=function(){clearInterval(u),u=setInterval(function(){f(),echo&&echo.render()},4e3)},p=function(){s=e.width(),o=s*r,e.height(o),t.find("li").height(o).width(s),t.width(s*i*2),t.css("left",0),a=0,c(),h()},d=function(){qk.cart.getNum(function(e){e>0?$(".header-cart i").html(e).show():$(".header-cart i").hide()})},v=function(){$(".header-user,.header-cart").click(function(e){e.preventDefault();var t=$(this),n=t.attr("href");QHPass.Cookie.get("Q")?location.href=n:qk.passport.login()})},m=function(e,t,n){function o(){i=setInterval(u,t),r||(s.style.marginTop=parseInt(s.style.marginTop)-1+"px")}function u(){parseInt(s.style.marginTop)%e!=0?(s.style.marginTop=parseInt(s.style.marginTop)-1+"px",Math.abs(parseInt(s.style.marginTop))>=s.scrollHeight/2&&(s.style.marginTop=0)):(clearInterval(i),setTimeout(o,n))}var r=!1,i,s=document.getElementById("marqueebox");s.innerHTML+=s.innerHTML,s.style.marginTop=0,s.mouseenter=function(){r=!0},s.mouseleave=function(){r=!1},setTimeout(o,n)},g=new Swiper(".swiper-container",{loop:!1,pagination:".swiper-pagination1",slidesPerView:3,slidesPerGroup:3,touchMoveStopPropagation:!0}),y=function(){$.post("/appRush/home",{},function(e){g.removeAllSlides();if(e.errno==0)if(e.data.tabs&&e.data.tabs.length>0){$.each(e.data.tabs,function(e,t){var n=t.content.items;n.length>0?$.each(n,function(e,t){var n=[];n.push('<div class="swiper-slide buycontent">'),n.push('<ul class="star-plist">'),n.push("<li>"),n.push('<a href="/activity/onsale?item_id='+t.id+'">'),n.push('<span class="pimg">'),n.push('<img src="'+t.picture.url+'">'),t.picture.text&&n.push('<span class="sellout">'+t.picture.text+"</span>"),n.push("</span>"),n.push('<span class="start-title">'+t.title+"</span>"),n.push('<span class="start-price">'),n.push("\uffe5"+t.promotionalPrice),t.promotionalPrice<t.price&&n.push('<i class="original-price">\uffe5'+t.price+"</i>"),n.push("</span>"),n.push("</a>"),n.push("</li>"),n.push("</ul>"),n.push("</div>"),g.appendSlide(n.join(""))}):$(".buybox2").hide(),n.length<4?$(".swiper-pagination2").hide():$(".swiper-pagination2").show()}),b(e);var t=e.data.tabs[0].content.items.length%3;if(t)for(var n=0;n<3-t;n++)g.appendSlide('<div class="swiper-slide buycontent"></div>')}else $(".buybox2").hide();else e.errno>0&&$(".buybox2").hide()},"json")},b=function(e){var t={entryTime:+(new Date),start:(new Date(e.data.tabs[0].content.start)).getTime()/1e3,end_time:parseInt(e.timestamp/1e3,10)+e.data.tabs[0].remain,timestamp:parseInt(e.timestamp/1e3,10),remain:e.data.tabs[0].remain};window.showtimes=t,w(e)},w=function(e){showtimes.start-showtimes.timestamp>0?CountDownList.addCounterNode({end:showtimes.start*1e3,base:showtimes.timestamp*1e3,first:function(){$("#showtimedown .index-countdown").show(),$("#showtimedown .session").show()},every:function(){var e=showtimes.remain*1e3;e-=+(new Date)-showtimes.entryTime;var t=CountDownList.getDHMSByDelta(e,!0),n="\u8ddd\u5f00\u59cb<i>"+t[1]+"</i>:<i>"+t[2]+"</i>:<i>"+t[3]+"</i>";$("#showtimedown .starttime").html(n)},finish:function(){y(),$("#showtimedown .index-countdown").show()}}):CountDownList.addCounterNode({begin:showtimes.start*1e3,end:showtimes.end_time*1e3,base:showtimes.timestamp*1e3,first:function(){$("#showtimedown .index-countdown").show(),$("#showtimedown .session").show()},every:function(){var e=showtimes.remain*1e3;e-=+(new Date)-showtimes.entryTime;var t=CountDownList.getDHMSByDelta(e,!0),n="\u8ddd\u7ed3\u675f<i>"+t[1]+"</i>:<i>"+t[2]+"</i>:<i>"+t[3]+"</i>";$("#showtimedown .starttime").html(n)},finish:function(e){y(),$("#showtimedown .index-countdown").show(),$("#showtimedown .session").show()}})};CountDownList.run();var E=function(){e=$(".mod-slider .slider-box"),t=e.find(".slider-list"),n=$(".mod-slider .slider-points"),i=t.find("li").length,t.html(function(e,t){return t+t}),n.html(""),$.each(new Array(i),function(e){$("<i></i>").attr("data-index",e).appendTo(n)}),n.css("marginLeft",-n.width()/2),$(window).on("resize",function(){p()}),e.parent().on("swipeLeft",function(){f(),h(),echo&&echo.render()}).on("swipeRight",function(){l(),h(),echo&&echo.render()}),e.on("touchstart",function(e){start={x:e.touches[0].pageX,y:e.touches[0].pageY}}).on("touchmove",function(e){if(e.touches.length>1||e.scale&&e.scale!==1)return!1;var t={};t.x=e.touches[0].pageX-start.x,t.y=e.touches[0].pageY-start.y,Math.abs(t.x)>Math.abs(t.y)&&e.preventDefault()}),p(),d(),v(),echo&&echo.init({}),m(16,20,1500),y()};return{init:E}}();